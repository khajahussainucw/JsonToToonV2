<div class="json-formatter-container">
  <!-- Page Header -->
  <div class="page-header">
    <h1 class="page-title">JSON Path Query</h1>
    <p class="page-description">Extract data from JSON using JSONPath expressions</p>
  </div>
  
  <input type="file" #fileInput accept=".json,.txt" style="display: none;" (change)="onFileSelected($event)" />
  <div class="editors-wrapper">
    <!-- Left Panel (Input) -->
    <div class="editor-container">
      <div class="panel-header">
        <div class="panel-header-left">
          <h2>JSON Input</h2>
        </div>
        <div class="panel-actions">
          <button class="btn" (click)="loadSample()" aria-label="Sample">            <span class="d-none d-md-inline">Sample</span>
          </button>
          <button class="btn" (click)="triggerFileUpload()" aria-label="Upload">            <span class="d-none d-md-inline">Upload</span>
          </button>
          <button class="btn" (click)="clearInput()">          </button>
        </div>
      </div>
      <div class="editor-wrapper">
        <div #inputEditor class="editor"></div>
      </div>
    </div>

    <!-- Right Panel (Output) -->
    <div class="editor-container">
      <div class="panel-header">
        <div class="panel-header-left">
          <h2>Query Results</h2>
        </div>
        <div class="panel-actions">
          <button class="btn" (click)="downloadResult()" aria-label="Download">            <span class="d-none d-md-inline">Download</span>
          </button>
          <button class="btn" (click)="copyToClipboard()" aria-label="Copy">            <span class="d-none d-md-inline">Copy</span>
          </button>
        </div>
      </div>
      <div class="editor-wrapper">
        <div #outputEditor class="editor"></div>
      </div>
    </div>
  </div>
  
  <!-- JSONPath Input -->
  <div class="path-input-container">
    <div class="path-input-wrapper">
      <label for="jsonPath">JSONPath Expression:</label>
      <input 
        type="text" 
        id="jsonPath" 
        #pathInput
        [(ngModel)]="jsonPath" 
        (input)="onPathChange()"
        class="path-input" 
        placeholder="e.g., $.store.book[*].author"
      />
      <div class="path-examples">
        <span class="example-label">Examples:</span>
        <button class="btn-example" (click)="loadPathExample(examplePaths.allValues)">All values</button>
        <button class="btn-example" (click)="loadPathExample(examplePaths.allAuthors)">All authors</button>
        <button class="btn-example" (click)="loadPathExample(examplePaths.allPrices)">All prices</button>
        <button class="btn-example" (click)="loadPathExample(examplePaths.booksUnder10)">Books under $10</button>
      </div>
    </div>
  </div>
</div>

<!-- Bootstrap Error Modal -->
<div class="modal fade" tabindex="-1" aria-labelledby="errorModalLabel" aria-hidden="true" [class.show]="errorModalVisible" [style.display]="errorModalVisible ? 'block' : 'none'">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="errorModalLabel">Error</h5>
        <button type="button" class="btn-close" aria-label="Close" (click)="closeErrorModal()"></button>
      </div>
      <div class="modal-body">
        <p>{{ errorMessage }}</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="closeErrorModal()">Close</button>
      </div>
    </div>
  </div>
</div>
<div class="modal-backdrop fade" [class.show]="errorModalVisible" *ngIf="errorModalVisible"></div>

<!-- Copy Success Toast -->
<div class="toast-container position-fixed end-0 p-3" style="top: 15%;">
  <div class="toast" [class.show]="copySuccessVisible" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="toast-header">      <strong class="me-auto">Success</strong>
    </div>
    <div class="toast-body">
      {{ copySuccessMessage }}
    </div>
  </div>
  <div class="toast" [class.show]="copyErrorVisible" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="toast-header">      <strong class="me-auto">Warning</strong>
    </div>
    <div class="toast-body">
      {{ copyErrorMessage }}
    </div>
  </div>
</div>

<!-- SEO Content Section -->
<div class="content-section">
  <div class="container-fluid px-4 py-5">
    
    <!-- Introduction Section -->
    <section class="content-block mb-5">
      <h2 class="content-heading">What is JSON Path Query?</h2>
      <p class="content-text">
        Need to extract specific data from huge JSON files? JSON Path lets you query and extract values from complex <a href="https://www.json.org/json-en.html" target="_blank" rel="noopener noreferrer">JSON (JavaScript Object Notation)</a> structures. Think of it like XPath for XML, but for JSON.
      </p>
      <p class="content-text">
        As <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON" target="_blank" rel="noopener noreferrer">MDN Web Docs</a> explains, JSONPath is essential for navigating and querying JSON data. Our tool supports standard JSONPath syntax, so you can find values, filter arrays, and navigate nested structures. Great for pulling specific data from massive JSON documents or API responses.
      </p>
      <p class="content-text">
        Everything happens in your browser – your JSON never leaves your computer. Query and extract data instantly with powerful JSONPath expressions.
      </p>
    </section>

    <!-- Key Features Section -->
    <section class="content-block mb-5">
      <h2 class="content-heading">What Makes This Tool Different</h2>
      <div class="row g-4">
        <div class="col-md-6 col-lg-4">
          <div class="feature-card">
            <h3 class="feature-title">Standard JSONPath Syntax</h3>
            <p class="feature-description">We support standard JSONPath expressions like <code>$..*</code>, <code>$.store.book[*].author</code>, and <code>$..price</code>. Works with any JSONPath-compatible syntax.</p>
          </div>
        </div>
        <div class="col-md-6 col-lg-4">
          <div class="feature-card">
            <h3 class="feature-title">Filter Expressions</h3>
            <p class="feature-description">Use filter expressions to find specific items. Query like <code>$.store.book[?(&#64;.price < 10)]</code> to find books under $10.</p>
          </div>
        </div>
        <div class="col-md-6 col-lg-4">
          <div class="feature-card">
            <h3 class="feature-title">Quick Examples</h3>
            <p class="feature-description">Click example buttons to try common JSONPath patterns. Learn the syntax quickly with pre-built examples.</p>
          </div>
        </div>
        <div class="col-md-6 col-lg-4">
          <div class="feature-card">
            <h3 class="feature-title">File Upload Support</h3>
            <p class="feature-description">Got a big file? Just upload it. Works great for querying those massive JSON documents or API dumps.</p>
          </div>
        </div>
        <div class="col-md-6 col-lg-4">
          <div class="feature-card">
            <h3 class="feature-title">Real-Time Results</h3>
            <p class="feature-description">Results update automatically as you type your JSONPath expression. See matches instantly without clicking a button.</p>
          </div>
        </div>
        <div class="col-md-6 col-lg-4">
          <div class="feature-card">
            <h3 class="feature-title">Copy & Download</h3>
            <p class="feature-description">One click to copy, or download it as a file. Great for extracting data you need for further processing.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- How to Use Section -->
    <section class="content-block mb-5">
      <h2 class="content-heading">How It Works</h2>
      <div class="steps-container">
        <div class="step-item">
          <div class="step-number">1</div>
          <div class="step-content">
            <h3 class="step-title">Paste or Upload JSON</h3>
            <p class="step-description">Paste your JSON document into the left editor, or click "Upload" to load a file. You can also click "Sample" to see an example JSON structure.</p>
          </div>
        </div>
        <div class="step-item">
          <div class="step-number">2</div>
          <div class="step-content">
            <h3 class="step-title">Enter JSONPath Expression</h3>
            <p class="step-description">Type your JSONPath expression in the input field below the editors. Use examples like <code>$..*</code> for all values, or <code>$.store.book[*].author</code> for specific paths. Click example buttons to try common patterns.</p>
          </div>
        </div>
        <div class="step-item">
          <div class="step-number">3</div>
          <div class="step-content">
            <h3 class="step-title">View and Export Results</h3>
            <p class="step-description">Matching values appear in the right panel automatically. Click "Copy" to copy results, or "Download" to save them as a file.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Use Cases Section -->
    <section class="content-block mb-5">
      <h2 class="content-heading">When You'd Actually Use This</h2>
      <div class="row g-4">
        <div class="col-md-6">
          <div class="use-case-card">
            <h3 class="use-case-title">Data Extraction</h3>
            <p class="use-case-text">Extract specific values from large JSON documents. Find all prices, names, or IDs without manually navigating the structure.</p>
          </div>
        </div>
        <div class="col-md-6">
          <div class="use-case-card">
            <h3 class="use-case-title">Filtering Arrays</h3>
            <p class="use-case-text">Use filter expressions to find items matching conditions. Find all products under a certain price, or users in a specific city.</p>
          </div>
        </div>
        <div class="col-md-6">
          <div class="use-case-card">
            <h3 class="use-case-title">API Testing</h3>
            <p class="use-case-text">Test API responses by extracting specific fields. Verify that expected values exist and match your requirements.</p>
          </div>
        </div>
        <div class="col-md-6">
          <div class="use-case-card">
            <h3 class="use-case-title">Data Analysis</h3>
            <p class="use-case-text">Extract data for analysis or reporting. Pull specific fields from JSON exports to use in spreadsheets or other tools.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ Section -->
    <section class="content-block mb-5">
      <h2 class="content-heading">Common Questions</h2>
      <div class="faq-container">
        <div class="faq-item">
          <h3 class="faq-question">Is my JSON data stored?</h3>
          <p class="faq-answer">Nope. Everything happens right in your browser. Your JSON never leaves your computer – we don't even see it.</p>
        </div>
        <div class="faq-item">
          <h3 class="faq-question">What JSONPath syntax is supported?</h3>
          <p class="faq-answer">We support standard JSONPath syntax including: <code>$</code> (root), <code>.</code> (child operator), <code>..</code> (recursive descent), <code>[*]</code> (wildcard), <code>[0]</code> (array index), and <code>[?(&#64;.key)]</code> (filter expressions).</p>
        </div>
        <div class="faq-item">
          <h3 class="faq-question">How do filter expressions work?</h3>
          <p class="faq-answer">Filter expressions use <code>[?(&#64;.property operator value)]</code> syntax. For example, <code>$..book[?(&#64;.price < 10)]</code> finds all books with price less than 10.</p>
        </div>
        <div class="faq-item">
          <h3 class="faq-question">Can I query nested objects?</h3>
          <p class="faq-answer">Yep. Use the recursive descent operator <code>..</code> to search through all levels. For example, <code>$..price</code> finds all price values no matter how deep they're nested.</p>
        </div>
        <div class="faq-item">
          <h3 class="faq-question">What if the JSONPath doesn't match anything?</h3>
          <p class="faq-answer">If no matches are found, the output will be empty or show an empty array. Check your JSONPath syntax and verify the JSON structure matches your query.</p>
        </div>
        <div class="faq-item">
          <h3 class="faq-question">Does it work with invalid JSON?</h3>
          <p class="faq-answer">Nah, you'll need valid JSON first. If something's broken, we'll show you an error. Try our <a routerLink="/json-validator">JSON Validator</a> or <a routerLink="/json-fixer">JSON Fixer</a> to sort it out first.</p>
        </div>
      </div>
    </section>

    <!-- Related Tools Section -->
    <section class="content-block">
      <h2 class="content-heading">Other JSON Tools You Might Need</h2>
      <p class="content-text mb-4">Querying is just one JSON task. Here are other tools that work well together:</p>
      <div class="related-tools-grid">
        <a routerLink="/" class="tool-link"><span>JSON Parser</span>
        </a>
        <a routerLink="/json-formatter" class="tool-link"><span>JSON Formatter</span>
        </a>
        <a routerLink="/json-validator" class="tool-link"><span>JSON Validator</span>
        </a>
        <a routerLink="/json-diff" class="tool-link"><span>JSON Diff</span>
        </a>
        <a routerLink="/json-merge" class="tool-link"><span>JSON Merge</span>
        </a>
        <a routerLink="/json-to-csv" class="tool-link"><span>JSON to CSV</span>
        </a>
        <a routerLink="/json-to-yaml" class="tool-link"><span>JSON to YAML</span>
        </a>
        <a routerLink="/json-schema-generator" class="tool-link"><span>JSON Schema Generator</span>
        </a>
      </div>
      <p class="content-text mt-4">
        Need to learn more about JSON? Check out the official <a href="https://www.json.org/" target="_blank" rel="noopener noreferrer">JSON.org</a> website or the comprehensive guide on <a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/JSON" target="_blank" rel="noopener noreferrer">MDN</a>.
      </p>
    </section>

  </div>
</div>

