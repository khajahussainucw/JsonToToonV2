<div class="json-formatter-container">
  <!-- Page Header -->
  <div class="page-header">
    <h1 class="page-title">JSON Diff / Compare</h1>
    <p class="page-description">Compare two JSON objects and find differences</p>
  </div>
  
  <input type="file" #fileInput1 accept=".json,.txt" style="display: none;" (change)="onFileSelected($event, 1)" />
  <input type="file" #fileInput2 accept=".json,.txt" style="display: none;" (change)="onFileSelected($event, 2)" />
  <div class="editors-wrapper">
    <!-- Left Panel (JSON 1) -->
    <div class="editor-container">
      <div class="panel-header">
        <div class="panel-header-left">
          <h2>JSON 1</h2>
        </div>
        <div class="panel-actions">
          <button class="btn" (click)="loadSample()" aria-label="Sample">            <span class="d-none d-md-inline">Sample</span>
          </button>
          <button class="btn" (click)="triggerFileUpload(1)" aria-label="Upload">            <span class="d-none d-md-inline">Upload</span>
          </button>
          <button class="btn" (click)="clearInput(1)">          </button>
        </div>
      </div>
      <div class="editor-wrapper">
        <div #inputEditor1 class="editor"></div>
      </div>
    </div>

    <!-- Middle Panel (JSON 2) -->
    <div class="editor-container">
      <div class="panel-header">
        <div class="panel-header-left">
          <h2>JSON 2</h2>
        </div>
        <div class="panel-actions">
          <button class="btn" (click)="triggerFileUpload(2)" aria-label="Upload">            <span class="d-none d-md-inline">Upload</span>
          </button>
          <button class="btn" (click)="clearInput(2)">          </button>
        </div>
      </div>
      <div class="editor-wrapper">
        <div #inputEditor2 class="editor"></div>
      </div>
    </div>

    <!-- Right Panel (Diff Output) -->
    <div class="editor-container">
      <div class="panel-header">
        <div class="panel-header-left">
          <h2>Differences</h2>
        </div>
        <div class="panel-actions">
          <button class="btn" (click)="downloadDiff()" aria-label="Download">            <span class="d-none d-md-inline">Download</span>
          </button>
          <button class="btn" (click)="copyToClipboard()" aria-label="Copy">            <span class="d-none d-md-inline">Copy</span>
          </button>
        </div>
      </div>
      <div class="editor-wrapper">
        <div #outputEditor class="editor"></div>
      </div>
    </div>
  </div>
</div>

<!-- Bootstrap Error Modal -->
<div class="modal fade" tabindex="-1" aria-labelledby="errorModalLabel" aria-hidden="true" [class.show]="errorModalVisible" [style.display]="errorModalVisible ? 'block' : 'none'">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="errorModalLabel">Error</h5>
        <button type="button" class="btn-close" aria-label="Close" (click)="closeErrorModal()"></button>
      </div>
      <div class="modal-body">
        <p>{{ errorMessage }}</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="closeErrorModal()">Close</button>
      </div>
    </div>
  </div>
</div>
<div class="modal-backdrop fade" [class.show]="errorModalVisible" *ngIf="errorModalVisible"></div>

<!-- Copy Success Toast -->
<div class="toast-container position-fixed end-0 p-3" style="top: 15%;">
  <div class="toast" [class.show]="copySuccessVisible" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="toast-header">      <strong class="me-auto">Success</strong>
    </div>
    <div class="toast-body">
      {{ copySuccessMessage }}
    </div>
  </div>
  <div class="toast" [class.show]="copyErrorVisible" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="toast-header">      <strong class="me-auto">Warning</strong>
    </div>
    <div class="toast-body">
      {{ copyErrorMessage }}
    </div>
  </div>
</div>

<!-- SEO Content Section -->
<div class="content-section">
  <div class="container-fluid px-4 py-5">
    
    <!-- Introduction Section -->
    <section class="content-block mb-5">
      <h2 class="content-heading">What is JSON Diff / Compare?</h2>
      <p class="content-text">
        Need to see what changed between two JSON files? This tool compares two <a href="https://www.json.org/json-en.html" target="_blank" rel="noopener noreferrer">JSON (JavaScript Object Notation)</a> objects or arrays and shows you exactly what's different. Great for debugging API changes, tracking config file updates, or reviewing code changes.
      </p>
      <p class="content-text">
        As <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON" target="_blank" rel="noopener noreferrer">MDN Web Docs</a> explains, comparing JSON structures helps you understand what changed. Our diff tool follows the <a href="https://datatracker.ietf.org/doc/html/rfc8259" target="_blank" rel="noopener noreferrer">RFC 8259 JSON specification</a> and shows you exactly what changed, what was added, and what got removed.
      </p>
      <p class="content-text">
        Everything happens in your browser – your JSON never leaves your computer. Compare, analyze, and understand changes instantly.
      </p>
    </section>

    <!-- Key Features Section -->
    <section class="content-block mb-5">
      <h2 class="content-heading">What Makes This Tool Different</h2>
      <div class="row g-4">
        <div class="col-md-6 col-lg-4">
          <div class="feature-card">
            <h3 class="feature-title">Side-by-Side Comparison</h3>
            <p class="feature-description">View both JSON documents side-by-side with differences clearly highlighted. Easy to see what changed at a glance.</p>
          </div>
        </div>
        <div class="col-md-6 col-lg-4">
          <div class="feature-card">
            <h3 class="feature-title">Detailed Difference Report</h3>
            <p class="feature-description">Get a full report showing what was added, removed, and modified. Great for understanding complex changes in your data.</p>
          </div>
        </div>
        <div class="col-md-6 col-lg-4">
          <div class="feature-card">
            <h3 class="feature-title">Handles Nested Structures</h3>
            <p class="feature-description">We compare deeply nested objects and arrays too. Shows differences at any level, so you can find changes even in complex structures.</p>
          </div>
        </div>
        <div class="col-md-6 col-lg-4">
          <div class="feature-card">
            <h3 class="feature-title">File Upload Support</h3>
            <p class="feature-description">Got big files? Just upload them. Works great for comparing those massive config files or API responses.</p>
          </div>
        </div>
        <div class="col-md-6 col-lg-4">
          <div class="feature-card">
            <h3 class="feature-title">Download Results</h3>
            <p class="feature-description">Download the difference report as a file, or copy it to clipboard. Share findings with your team easily.</p>
          </div>
        </div>
        <div class="col-md-6 col-lg-4">
          <div class="feature-card">
            <h3 class="feature-title">Syntax Highlighting</h3>
            <p class="feature-description">Provides beautiful syntax highlighting for both JSON documents. Makes it easier to read and understand the differences.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- How to Use Section -->
    <section class="content-block mb-5">
      <h2 class="content-heading">How It Works</h2>
      <div class="steps-container">
        <div class="step-item">
          <div class="step-number">1</div>
          <div class="step-content">
            <h3 class="step-title">Paste or Upload Two JSON Documents</h3>
            <p class="step-description">Paste your first JSON into the left editor, and your second JSON into the middle editor. You can also upload files for either document. Click "Sample" to see an example comparison.</p>
          </div>
        </div>
        <div class="step-item">
          <div class="step-number">2</div>
          <div class="step-content">
            <h3 class="step-title">Automatic Comparison</h3>
            <p class="step-description">We automatically compare both JSON documents and show the differences in the right panel. Added properties, removed properties, and changed values are clearly marked.</p>
          </div>
        </div>
        <div class="step-item">
          <div class="step-number">3</div>
          <div class="step-content">
            <h3 class="step-title">Review and Export</h3>
            <p class="step-description">Review the differences in the output panel. Click "Copy" to copy the diff report, or "Download" to save it as a file for documentation or sharing.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Use Cases Section -->
    <section class="content-block mb-5">
      <h2 class="content-heading">When You'd Actually Use This</h2>
      <div class="row g-4">
        <div class="col-md-6">
          <div class="use-case-card">
            <h3 class="use-case-title">API Version Changes</h3>
            <p class="use-case-text">Compare API responses before and after updates. See exactly what fields changed, what was added, or what was removed. Essential for API migration planning.</p>
          </div>
        </div>
        <div class="col-md-6">
          <div class="use-case-card">
            <h3 class="use-case-title">Config File Reviews</h3>
            <p class="use-case-text">Compare configuration files to see what changed between versions. Great for reviewing changes before deploying to production.</p>
          </div>
        </div>
        <div class="col-md-6">
          <div class="use-case-card">
            <h3 class="use-case-title">Debugging</h3>
            <p class="use-case-text">Compare expected JSON with actual JSON to find discrepancies. Quickly identify what's different when debugging data issues.</p>
          </div>
        </div>
        <div class="col-md-6">
          <div class="use-case-card">
            <h3 class="use-case-title">Data Migration</h3>
            <p class="use-case-text">Compare JSON exports before and after data migration. Verify that all data was transferred correctly and nothing was lost.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ Section -->
    <section class="content-block mb-5">
      <h2 class="content-heading">Common Questions</h2>
      <div class="faq-container">
        <div class="faq-item">
          <h3 class="faq-question">Is my JSON data stored?</h3>
          <p class="faq-answer">Nope. Everything happens right in your browser. Your JSON never leaves your computer – we don't even see it.</p>
        </div>
        <div class="faq-item">
          <h3 class="faq-question">What if the JSON structures are different?</h3>
          <p class="faq-answer">The diff tool handles different structures gracefully. It shows which properties exist in one document but not the other, and highlights value differences for shared properties.</p>
        </div>
        <div class="faq-item">
          <h3 class="faq-question">Does it compare arrays?</h3>
          <p class="faq-answer">Yep. We compare arrays element by element and show which items were added, removed, or modified. Works with both simple arrays and arrays of objects.</p>
        </div>
        <div class="faq-item">
          <h3 class="faq-question">How does it handle nested objects?</h3>
          <p class="faq-answer">The diff recursively compares nested objects and arrays. Differences at any nesting level are shown in the output, making it easy to find changes deep in the structure.</p>
        </div>
        <div class="faq-item">
          <h3 class="faq-question">Can I compare invalid JSON?</h3>
          <p class="faq-answer">No. Both JSON documents must be valid JSON. If either is invalid, you'll see an error. Use our <a routerLink="/json-validator">JSON Validator</a> first to fix any syntax errors.</p>
        </div>
        <div class="faq-item">
          <h3 class="faq-question">What format is the diff output?</h3>
          <p class="faq-answer">The diff output shows a structured comparison highlighting additions, deletions, and modifications. It's formatted for easy reading and can be downloaded as a text file.</p>
        </div>
      </div>
    </section>

    <!-- Related Tools Section -->
    <section class="content-block">
      <h2 class="content-heading">Other JSON Tools You Might Need</h2>
      <p class="content-text mb-4">Comparison is just one JSON task. Here are other tools that work well together:</p>
      <div class="related-tools-grid">
        <a routerLink="/" class="tool-link"><span>JSON Parser</span>
        </a>
        <a routerLink="/json-formatter" class="tool-link"><span>JSON Formatter</span>
        </a>
        <a routerLink="/json-validator" class="tool-link"><span>JSON Validator</span>
        </a>
        <a routerLink="/json-merge" class="tool-link"><span>JSON Merge</span>
        </a>
        <a routerLink="/json-fixer" class="tool-link"><span>JSON Fixer</span>
        </a>
        <a routerLink="/json-to-csv" class="tool-link"><span>JSON to CSV</span>
        </a>
        <a routerLink="/json-to-yaml" class="tool-link"><span>JSON to YAML</span>
        </a>
        <a routerLink="/json-schema-generator" class="tool-link"><span>JSON Schema Generator</span>
        </a>
      </div>
      <p class="content-text mt-4">
        Need to learn more about JSON? Check out the official <a href="https://www.json.org/" target="_blank" rel="noopener noreferrer">JSON.org</a> website or the comprehensive guide on <a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/JSON" target="_blank" rel="noopener noreferrer">MDN</a>.
      </p>
    </section>

  </div>
</div>
