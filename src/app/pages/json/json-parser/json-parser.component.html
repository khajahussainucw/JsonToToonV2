<div class="paddingLeftRight" >
  <div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
      <span class="fw-bold">
        <span class="d-none d-md-inline">Copy and Paste JSON in the following area</span>
        <span class="d-inline d-md-none">Enter JSON here</span>
      </span>
      <div class="action-buttons">

        <button class="btn btn-sm btn-dark  animate__animated animate__flipInX" *ngIf="hasValidJson" (click)="openTableModal()">
          <i class="fas fa-expand"></i>
          <span class="d-none d-md-inline"> Maximize</span>
        </button>

        <button class="btn btn-sm btn-dark" *ngIf="hasValidJson" (click)="toggleParentTranspose()" 
                [class.active]="isParentTransposed" title="Transpose main table">
          <i class="fas fa-arrows-rotate"></i>
          <span class="d-none d-lg-inline"> Main</span>
        </button>

        <button class="btn btn-sm btn-dark" *ngIf="hasValidJson" (click)="toggleChildTranspose()" 
                [class.active]="isChildTransposed" title="Transpose nested tables">
          <i class="fas fa-arrows-rotate"></i>
          <span class="d-none d-lg-inline"> Nested</span>
        </button>

        <button class="btn btn-sm btn-dark  " (click)="downloadAsExcel()" *ngIf="hasValidJson">
          <i class="fas fa-file-excel"></i>
          <span class="d-none d-md-inline"> Excel</span>
        </button>

        <button class="btn btn-sm btn-dark" (click)="loadSampleData()">
          <i class="fas fa-flask"></i>
          <span class="d-none d-md-inline"> Sample</span>
        </button>
        <button class="btn btn-sm btn-dark" *ngIf="hasValidJson" (click)="toggleEditMode()" [class.active]="isEditMode">
          <i class="fas fa-pen"></i>
          <span class="d-none d-md-inline"> {{ isEditMode ? 'Done' : 'Edit' }} </span>
        </button>

        <button class="btn btn-sm btn-dark" (click)="openShareModal()">
          <i class="fas fa-share-square"></i>
          <span class="d-none d-md-inline"> Share</span>
        </button>
        <button class="btn btn-sm btn-dark" data-bs-toggle="modal" data-bs-target="#infoModal">
          <i class="fas fa-info-circle"></i>
          <!--<span class="d-none d-md-inline"> Info</span>-->
        </button>

      </div>
    </div>
    <div class="card-body p-0" style="position: relative;">
      <div class="split-loading" *ngIf="isLoading">
        <div class="spinner-container">
          <div class="spinner-border text-secondary" style="width: 3rem; height: 3rem;" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
          <div class="loading-message mt-2">Loading data...</div>
        </div>
      </div>
      <div class="split-container">
        <div class="json-input-container" style="flex: 0.22 1 0%;">
          <div #editor class="editor"></div>
          <!--<div class="error-bar" *ngIf="errorMessage">
            <div class="error-message">
              <i class="fas fa-exclamation-circle text-danger"></i> {{ errorMessage }}
            </div>
          </div>-->
        </div>
        
        <div class="splitter" id="splitter" #splitter></div>
        
        <div class="table-output-container" style="flex: 0.78 1 0%;">
          <div class="table-container" #tableContainer>
            <div class="filter-status text-muted small mb-1" *ngIf="hasValidJson && tableData.length > 0 && filteredData.length !== tableData.length">
              Showing {{ filteredData.length }} of {{ tableData.length }} rows
            </div>
            <ng-container *ngIf="hasValidJson">
              <ng-container *ngIf="tableData.length > 0">
                <ng-container *ngIf="!isSingleObject; else singleObjectTpl">
                  <!-- Flat table for array of objects -->
                  <!-- Standard orientation (keys as columns) -->
                  <table class="table" *ngIf="columns.length > 0 && !isParentTransposed">
                    <thead>
                      <tr>
                        <th *ngFor="let col of columns" class="position-relative">
                          <b>{{ col }}</b>
                          <button *ngIf="isEditMode" type="button" class="btn btn-link p-0 m-1 column-remove" title="Remove column" (click)="removeColumn(col)"><i class="fas fa-times "></i></button>
                        </th>
                      </tr>
                      <tr>
                        <th *ngFor="let col of columns">
                          <input type="text" class="form-control form-control-sm"
                                 (input)="updateFilter(col, $any($event.target).value)"
                                 [value]="filters[col] || ''" placeholder="Filter" />
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let row of filteredData; let i = index">
                        <td *ngFor="let col of columns" (dblclick)="isEditMode && startEdit(i, col)">
                          <ng-container *ngIf="(isArray(row[col]) || isObject(row[col])) && !(editingRow === i && editingCol === col); else defaultCell">
                            <ng-container *ngTemplateOutlet="recursiveTable; context: { $implicit: row[col], isChild: true }"></ng-container>
                          </ng-container>
                          <ng-template #defaultCell>
                              <ng-container *ngIf="isEditMode && editingRow === i && editingCol === col; else valueTpl">
                                <input type="text" class="form-control form-control-sm"
                                       [value]="getEditValue(row[col])"
                                       (blur)="saveEdit(i, col, $any($event.target).value)"
                                       (keydown.enter)="saveEdit(i, col, $any($event.target).value)" />
                              </ng-container>
                              <ng-template #valueTpl>{{ formatValue(row[col]) }}</ng-template>
                            </ng-template>
                        </td>
                      </tr>
                    </tbody>
                  </table>

                  <!-- Transposed orientation (keys as rows) -->
                  <table class="table" *ngIf="columns.length > 0 && isParentTransposed">
                    <tbody>
                      <tr *ngFor="let key of columns">
                        <td class="nested-key"><b>{{ key }}</b></td>
                        <td *ngFor="let item of filteredData">
                          <ng-container *ngIf="isArray(item[key]) || isObject(item[key]); else primitiveTop">
                            <ng-container *ngTemplateOutlet="recursiveTable; context: { $implicit: item[key], isChild: true }"></ng-container>
                          </ng-container>
                          <ng-template #primitiveTop>{{ formatValue(item[key]) }}</ng-template>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </ng-container>
                <ng-template #singleObjectTpl>
                  <!-- Single object as key-value table -->
                  <table class="table">
                    <tbody>
                      <tr *ngFor="let key of columns; let i = index">
                        <td class="nested-key position-relative">
                          <b>{{ key }}</b>
                          <button *ngIf="isEditMode" type="button" class="btn btn-link p-0 m-1 column-remove" title="Remove column" (click)="removeColumn(key)"><i class="fas fa-times "></i></button>
                        </td>
                        <td (dblclick)="isEditMode && startEdit(0, key)">
                          <ng-container *ngIf="(isArray(tableData[0][key]) || isObject(tableData[0][key])) && !(isEditMode && editingRow === 0 && editingCol === key); else singleObjectCell">
                            <ng-container *ngTemplateOutlet="recursiveTable; context: { $implicit: tableData[0][key], isChild: true }"></ng-container>
                          </ng-container>
                          <ng-template #singleObjectCell>
                            <ng-container *ngIf="isEditMode && editingRow === 0 && editingCol === key; else singleObjectValue">
                              <input type="text" class="form-control form-control-sm"
                                     [value]="getEditValue(tableData[0][key])"
                                     (blur)="saveEdit(0, key, $any($event.target).value)"
                                     (keydown.enter)="saveEdit(0, key, $any($event.target).value)" />
                            </ng-container>
                            <ng-template #singleObjectValue>{{ formatValue(tableData[0][key]) }}</ng-template>
                          </ng-template>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </ng-template>
              </ng-container>
            </ng-container>
            <div *ngIf="!hasValidJson && errorMessage" class="invalid-json-message">
              <div class="basic-message">
                {{ errorMessage }}
              </div>
            </div>
            <div *ngIf="hasValidJson && tableData.length === 0" class="no-data">
              Enter valid JSON array to see the table
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- SEO Content Section -->
<div class="content-section">
  <div class="container-fluid px-4 py-5">
    
    <!-- Introduction Section -->
    <section class="content-block mb-5">
      <h2 class="content-heading">What is JSON Parser?</h2>
      <p class="content-text">
        Ever stared at a wall of JSON and wished you could just see it as a table? That's exactly what this tool does. JSON Parser takes your <a href="https://www.json.org/json-en.html" target="_blank" rel="noopener noreferrer">JSON (JavaScript Object Notation)</a> data and turns it into interactive HTML tables you can actually work with.
      </p>
      <p class="content-text">
        Whether you're debugging an API response, analyzing data exports, or trying to make sense of a config file, this tool saves you time. No more manually parsing through nested objects or writing scripts just to view your data. According to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON" target="_blank" rel="noopener noreferrer">MDN Web Docs</a>, JSON is the most common data format for APIs, and our parser handles all standard JSON structures.
      </p>
      <p class="content-text">
        The best part? Everything runs in your browser. Your data never touches our servers unless you explicitly share it. It's fast, free, and private.
      </p>
    </section>

    <!-- Key Features Section -->
    <section class="content-block mb-5">
      <h2 class="content-heading">What Makes This Tool Different</h2>
      <div class="row g-4">
        <div class="col-md-6 col-lg-4">
          <div class="feature-card">
            <h3 class="feature-title">Real Tables, Not Just Formatting</h3>
            <p class="feature-description">Most JSON viewers just prettify the code. This one actually converts arrays into rows and objects into columns. Nested data? Gets its own expandable table. It's like having Excel for JSON.</p>
          </div>
        </div>
        <div class="col-md-6 col-lg-4">
          <div class="feature-card">
            <h3 class="feature-title">Edit Right in the Table</h3>
            <p class="feature-description">Found a typo? Double-click and fix it. Changes sync back to the JSON automatically. No copy-paste, no manual editing – just click and type. Works great for quick data fixes.</p>
          </div>
        </div>
        <div class="col-md-6 col-lg-4">
          <div class="feature-card">
            <h3 class="feature-title">Search Without Scripts</h3>
            <p class="feature-description">Type in any column header to filter rows instantly. Need to find all users from a specific city? Just type it in. No need to write filter functions or grep through files.</p>
          </div>
        </div>
        <div class="col-md-6 col-lg-4">
          <div class="feature-card">
            <h3 class="feature-title">Go Fullscreen</h3>
            <p class="feature-description">Click maximize and the table takes over your screen. Perfect when you're dealing with wide datasets or need to show data to someone. All the filtering and editing works there too.</p>
          </div>
        </div>
        <div class="col-md-6 col-lg-4">
          <div class="feature-card">
            <h3 class="feature-title">Export to Excel</h3>
            <p class="feature-description">One click downloads your table as an .xls file. Open it in Excel, Google Sheets, or any spreadsheet app. Handy when you need to do pivot tables or share data with non-developers.</p>
          </div>
        </div>
        <div class="col-md-6 col-lg-4">
          <div class="feature-card">
            <h3 class="feature-title">Share Links</h3>
            <p class="feature-description">Generate a link to your JSON and send it to teammates. They can view it without pasting anything. Set expiration times – 1 hour, 1 day, or 1 week. Useful for debugging sessions.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- How to Use Section -->
    <section class="content-block mb-5">
      <h2 class="content-heading">How It Works</h2>
      <div class="steps-container">
        <div class="step-item">
          <div class="step-number">1</div>
          <div class="step-content">
            <h3 class="step-title">Paste Your JSON</h3>
            <p class="step-description">Grab JSON from anywhere – your API response, a config file, database export, or even from <a href="https://www.postman.com/" target="_blank" rel="noopener noreferrer">Postman</a>. Paste it in the left editor. Not sure what JSON looks like? Click "Sample" to see an example. The editor provides syntax highlighting, so you'll spot errors quickly.</p>
          </div>
        </div>
        <div class="step-item">
          <div class="step-number">2</div>
          <div class="step-content">
            <h3 class="step-title">Watch It Transform</h3>
            <p class="step-description">As soon as you paste, the table appears on the right. Arrays turn into rows, object properties become columns. Got nested data? It shows up as tables within tables. The parsing follows the <a href="https://datatracker.ietf.org/doc/html/rfc8259" target="_blank" rel="noopener noreferrer">RFC 8259 JSON specification</a>, so it handles everything standard JSON supports.</p>
          </div>
        </div>
        <div class="step-item">
          <div class="step-number">3</div>
          <div class="step-content">
            <h3 class="step-title">Filter and Fix</h3>
            <p class="step-description">Type in the filter boxes at the top of each column to narrow down results. Need to fix a value? Click "Edit" and double-click any cell. The change shows up in the JSON editor immediately. It's like editing a spreadsheet, but your JSON stays valid.</p>
          </div>
        </div>
        <div class="step-item">
          <div class="step-number">4</div>
          <div class="step-content">
            <h3 class="step-title">Export or Share</h3>
            <p class="step-description">Download as Excel if you need to work with it in <a href="https://www.microsoft.com/en-us/microsoft-365/excel" target="_blank" rel="noopener noreferrer">Microsoft Excel</a> or <a href="https://www.google.com/sheets/about/" target="_blank" rel="noopener noreferrer">Google Sheets</a>. Or generate a share link to send to teammates. Everything runs client-side using JavaScript's native <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse" target="_blank" rel="noopener noreferrer">JSON.parse()</a> – fast and private.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Use Cases Section -->
    <section class="content-block mb-5">
      <h2 class="content-heading">When You'd Actually Use This</h2>
      <div class="row g-4">
        <div class="col-md-6">
          <div class="use-case-card">
            <h3 class="use-case-title"><i class="fas fa-code me-2"></i>Debugging API Responses</h3>
            <p class="use-case-text">Your API returns JSON, but you can't tell if the structure is right. Paste it here, see it as a table, and spot missing fields instantly. Works great with <a href="https://swagger.io/" target="_blank" rel="noopener noreferrer">Swagger/OpenAPI</a> responses or <a href="https://graphql.org/" target="_blank" rel="noopener noreferrer">GraphQL</a> queries. Much faster than writing a script just to view data.</p>
          </div>
        </div>
        <div class="col-md-6">
          <div class="use-case-card">
            <h3 class="use-case-title"><i class="fas fa-database me-2"></i>Quick Data Analysis</h3>
            <p class="use-case-text">Got a JSON export from your database or analytics tool? Instead of writing Python scripts or loading it into a database, paste it here. Filter what you need, export to Excel, and you're done. Perfect for one-off analysis tasks without the overhead.</p>
          </div>
        </div>
        <div class="col-md-6">
          <div class="use-case-card">
            <h3 class="use-case-title"><i class="fas fa-cog me-2"></i>Config File Reviews</h3>
            <p class="use-case-text">Trying to understand a complex <a href="https://jsonapi.org/" target="_blank" rel="noopener noreferrer">JSON:API</a> config or settings file? View it as a table to see the structure clearly. Edit values directly if you need to make changes. Way easier than hunting through nested braces.</p>
          </div>
        </div>
        <div class="col-md-6">
          <div class="use-case-card">
            <h3 class="use-case-title"><i class="fas fa-users me-2"></i>Showing Data to Non-Devs</h3>
            <p class="use-case-text">Need to show JSON data to a PM or designer who doesn't read code? Generate a share link and send it over. They see a clean table instead of raw JSON. Saves you from explaining what brackets mean.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ Section -->
    <section class="content-block mb-5">
      <h2 class="content-heading">Common Questions</h2>
      <div class="faq-container">
        <div class="faq-item">
          <h3 class="faq-question">Do you store my JSON data?</h3>
          <p class="faq-answer">Nope. Everything runs in your browser using JavaScript. Your JSON never leaves your computer unless you click "Share" to create a link. Even then, you control when it expires. We follow the same privacy principles as tools like <a href="https://jsonformatter.org/" target="_blank" rel="noopener noreferrer">JSON Formatter</a> – process locally, keep it private.</p>
        </div>
        <div class="faq-item">
          <h3 class="faq-question">What JSON formats work?</h3>
          <p class="faq-answer">Anything that's valid JSON according to the <a href="https://www.ecma-international.org/publications-and-standards/standards/ecma-404/" target="_blank" rel="noopener noreferrer">ECMA-404 standard</a>. Arrays, objects, nested structures, mixed types – all of it. If <code>JSON.parse()</code> can handle it, so can we. Complex nesting just creates more nested tables.</p>
        </div>
        <div class="faq-item">
          <h3 class="faq-question">Can I edit the data?</h3>
          <p class="faq-answer">Yes. Click "Edit" and double-click any cell. Change the value, hit Enter, and it updates the JSON automatically. You can also remove columns entirely if you don't need them. It's like editing a spreadsheet, but your JSON stays syntactically correct.</p>
        </div>
        <div class="faq-item">
          <h3 class="faq-question">How does filtering work?</h3>
          <p class="faq-answer">Type in the boxes at the top of each column. It filters rows that contain your search term in that column. You can filter multiple columns at once – it shows rows that match all your filters. Case-insensitive, so "john" finds "John" too.</p>
        </div>
        <div class="faq-item">
          <h3 class="faq-question">What can I export to?</h3>
          <p class="faq-answer">Right now, Excel (.xls format). Opens in Excel, Google Sheets, LibreOffice – basically any spreadsheet app. The table structure stays intact, so nested data becomes nested tables in Excel too. We're looking at adding CSV export soon.</p>
        </div>
        <div class="faq-item">
          <h3 class="faq-question">How big can my JSON file be?</h3>
          <p class="faq-answer">No hard limit, but performance depends on your browser. Small files (under 1MB) parse instantly. Files around 5MB might take a second or two. Really huge files (10MB+) can slow things down, but they'll still work. If you're dealing with massive datasets, consider using a tool like <a href="https://jq.play/" target="_blank" rel="noopener noreferrer">jq</a> for command-line processing.</p>
        </div>
      </div>
    </section>

    <!-- Related Tools Section -->
    <section class="content-block">
      <h2 class="content-heading">Other JSON Tools You Might Need</h2>
      <p class="content-text mb-4">This parser is great for viewing data, but sometimes you need other things. Here are our other tools that work well together:</p>
      <div class="related-tools-grid">
        <a routerLink="/json-formatter" class="tool-link">
          <i class="fas fa-indent"></i>
          <span>JSON Formatter</span>
        </a>
        <a routerLink="/json-validator" class="tool-link">
          <i class="fas fa-check-circle"></i>
          <span>JSON Validator</span>
        </a>
        <a routerLink="/json-minifier" class="tool-link">
          <i class="fas fa-compress"></i>
          <span>JSON Minifier</span>
        </a>
        <a routerLink="/json-to-csv" class="tool-link">
          <i class="fas fa-file-csv"></i>
          <span>JSON to CSV</span>
        </a>
        <a routerLink="/json-to-yaml" class="tool-link">
          <i class="fas fa-file-code"></i>
          <span>JSON to YAML</span>
        </a>
        <a routerLink="/json-to-xml" class="tool-link">
          <i class="fas fa-file-code"></i>
          <span>JSON to XML</span>
        </a>
        <a routerLink="/json-to-toon" class="tool-link">
          <i class="fas fa-file-alt"></i>
          <span>JSON to TOON</span>
        </a>
        <a routerLink="/json-schema-generator" class="tool-link">
          <i class="fas fa-project-diagram"></i>
          <span>JSON Schema Generator</span>
        </a>
      </div>
      <p class="content-text mt-4">
        Need to learn more about JSON itself? Check out the official <a href="https://www.json.org/" target="_blank" rel="noopener noreferrer">JSON.org</a> website or the comprehensive guide on <a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/JSON" target="_blank" rel="noopener noreferrer">MDN</a>. For API design patterns, <a href="https://jsonapi.org/" target="_blank" rel="noopener noreferrer">JSON:API</a> is a great resource.
      </p>
    </section>

  </div>
</div>

<!-- Recursive template for nested structures -->
<ng-template #recursiveTable let-data let-isChild="isChild">
  <ng-container [ngSwitch]="true">
    <!-- Array handling -->
    <ng-container *ngSwitchCase="isArray(data)">
      <!-- Complex array of objects -->
      <ng-container *ngIf="data.length > 0 && hasComplexItems(data)">
        <!-- Determine if this table should be transposed -->
        <ng-container *ngIf="!(isChild ? isChildTransposed : isParentTransposed)">
          <!-- Standard view: each key becomes a row, each array item becomes a column -->
          <table class="table">
        <tbody>
          <tr *ngFor="let key of getCommonKeys(data)">
            <td class="nested-key"><b>{{ key }}</b></td>
            <td *ngFor="let item of data">
              <ng-container *ngIf="isArray(item[key]) || isObject(item[key]); else primitiveV">
                    <ng-container *ngTemplateOutlet="recursiveTable; context: { $implicit: item[key], isChild: true }"></ng-container>
              </ng-container>
              <ng-template #primitiveV>{{ formatValue(item[key]) }}</ng-template>
            </td>
          </tr>
        </tbody>
      </table>
        </ng-container>
        <ng-container *ngIf="isChild ? isChildTransposed : isParentTransposed">
          <!-- Transposed view: each key becomes a column, each array item becomes a row -->
          <table class="table">
            <thead>
              <tr>
                <th *ngFor="let key of getCommonKeys(data)"><b>{{ key }}</b></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of data">
                <td *ngFor="let key of getCommonKeys(data)">
                  <ng-container *ngIf="isArray(item[key]) || isObject(item[key]); else primitiveVT">
                    <ng-container *ngTemplateOutlet="recursiveTable; context: { $implicit: item[key], isChild: true }"></ng-container>
                  </ng-container>
                  <ng-template #primitiveVT>{{ formatValue(item[key]) }}</ng-template>
                </td>
              </tr>
            </tbody>
          </table>
        </ng-container>
      </ng-container>
      <!-- Simple array of primitives -->
      <table class="table" *ngIf="data.length > 0 && !hasComplexItems(data)">
        <tbody>
          <tr *ngFor="let item of data">
            <td>{{ formatValue(item) }}</td>
          </tr>
        </tbody>
      </table>
      <!-- Empty array -->
      <span *ngIf="data.length === 0">[]</span>
    </ng-container>

    <!-- Object handling -->
    <ng-container *ngSwitchCase="isObject(data)">
      <!-- Standard (keys as rows) -->
      <table class="table" *ngIf="!(isChild ? isChildTransposed : isParentTransposed)">
        <tbody>
          <tr *ngFor="let key of getObjectKeys(data)">
            <td class="nested-key"><b>{{ key }}</b></td>
            <td>
              <ng-container *ngTemplateOutlet="recursiveTable; context: { $implicit: data[key], isChild: true }"></ng-container>
            </td>
          </tr>
        </tbody>
      </table>

      <!-- Transposed (keys as columns) -->
      <table class="table" *ngIf="isChild ? isChildTransposed : isParentTransposed">
        <thead>
          <tr>
            <th *ngFor="let key of getObjectKeys(data)"><b>{{ key }}</b></th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td *ngFor="let key of getObjectKeys(data)">
              <ng-container *ngTemplateOutlet="recursiveTable; context: { $implicit: data[key], isChild: true }"></ng-container>
            </td>
          </tr>
        </tbody>
      </table>
    </ng-container>

    <!-- Primitive value handling -->
    <ng-container *ngSwitchDefault>
      {{ data }}
    </ng-container>
  </ng-container>
</ng-template>

<!-- Fullscreen modal for maximized table -->
<div class="modal fade" id="tableModal" tabindex="-1" aria-labelledby="tableModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" style="max-width:98vw; ">
    <div class="modal-content" style="height:96vh !important; ">
      <div class="modal-header bg-dark text-white">
        <h5 class="modal-title d-flex align-items-center" id="tableModalLabel">
          <i class="fas fa-expand me-2"></i>
          Maximized Table View
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close" (click)="closeTableModal()"></button>
      </div>
      <div class="modal-body">
        <div class="d-flex justify-content-end mb-3 gap-2">
          <button class="btn btn-sm btn-outline-dark" (click)="toggleParentTranspose()" 
                  [class.active]="isParentTransposed" title="Transpose main table">
            <i class="fas fa-arrows-rotate"></i> Main
          </button>
          <button class="btn btn-sm btn-outline-dark" (click)="toggleChildTranspose()" 
                  [class.active]="isChildTransposed" title="Transpose nested tables">
            <i class="fas fa-arrows-rotate"></i> Nested
          </button>
          <button class="btn btn-sm btn-outline-dark" (click)="toggleEditMode()"
                  [class.active]="isEditMode" title="Edit mode">
            <i class="fas fa-pen"></i> Edit
          </button>
        </div>
        <div class="">
          <div class="filter-status text-muted small mb-1" *ngIf="tableData.length > 0 && filteredData.length !== tableData.length">
            Showing {{ filteredData.length }} of {{ tableData.length }} rows
          </div>
          <ng-container *ngIf="tableData.length > 0">
            <ng-container *ngIf="!isSingleObject; else singleObjectTplModal">
              <!-- Standard orientation (keys as columns) -->
              <table class="table" *ngIf="columns.length > 0 && !isParentTransposed">
                <thead>
                  <tr>
                    <th *ngFor="let col of columns" class="position-relative">
                      <b>{{ col }}</b>
                      <button *ngIf="isEditMode" type="button" class="btn btn-link p-0 m-1 column-remove" title="Remove column" (click)="removeColumn(col)"><i class="fas fa-times "></i></button>
                    </th>
                  </tr>
                  <tr>
                    <th *ngFor="let col of columns">
                      <input type="text" class="form-control form-control-sm"
                             (input)="updateFilter(col, $any($event.target).value)"
                             [value]="filters[col] || ''" placeholder="Filter" />
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let row of filteredData; let i = index">
                    <td *ngFor="let col of columns" (dblclick)="isEditMode && startEdit(i, col)">
                      <ng-container *ngIf="(isArray(row[col]) || isObject(row[col])) && !(editingRow === i && editingCol === col); else defaultCellModal">
                        <ng-container *ngTemplateOutlet="recursiveTable; context: { $implicit: row[col], isChild: true }"></ng-container>
                      </ng-container>
                      <ng-template #defaultCellModal>
                        <ng-container *ngIf="isEditMode && isEditMode && editingRow === i && editingCol === col; else valueTplModal">
                          <input type="text" class="form-control form-control-sm"
                                 [value]="getEditValue(row[col])"
                                 (blur)="saveEdit(i, col, $any($event.target).value)"
                                 (keydown.enter)="saveEdit(i, col, $any($event.target).value)" />
                        </ng-container>
                        <ng-template #valueTplModal>{{ formatValue(row[col]) }}</ng-template>
                      </ng-template>
                    </td>
                  </tr>
                </tbody>
              </table>

              <!-- Transposed orientation (keys as rows) -->
              <table class="table" *ngIf="columns.length > 0 && isParentTransposed">
                <tbody>
                  <tr *ngFor="let key of columns">
                    <td class="nested-key"><b>{{ key }}</b></td>
                    <td *ngFor="let item of filteredData">
                      <ng-container *ngIf="isArray(item[key]) || isObject(item[key]); else primitiveTopModal">
                        <ng-container *ngTemplateOutlet="recursiveTable; context: { $implicit: item[key], isChild: true }"></ng-container>
                      </ng-container>
                      <ng-template #primitiveTopModal>{{ formatValue(item[key]) }}</ng-template>
                    </td>
                  </tr>
                </tbody>
              </table>
            </ng-container>
            <ng-template #singleObjectTplModal>
              <!-- Single object as key-value table -->
              <table class="table">
                <tbody>
                  <tr *ngFor="let key of columns; let i = index">
                    <td class="nested-key position-relative">
                      <b>{{ key }}</b>
                      <button *ngIf="isEditMode" type="button" class="btn btn-link p-0 m-1 column-remove" title="Remove column" (click)="removeColumn(key)"><i class="fas fa-times "></i></button>
                    </td>
                    <td (dblclick)="isEditMode && startEdit(0, key)">
                      <ng-container *ngIf="(isArray(tableData[0][key]) || isObject(tableData[0][key])) && !(isEditMode && editingRow === 0 && editingCol === key); else singleObjectCellModal">
                        <ng-container *ngTemplateOutlet="recursiveTable; context: { $implicit: tableData[0][key], isChild: true }"></ng-container>
                      </ng-container>
                      <ng-template #singleObjectCellModal>
                        <ng-container *ngIf="isEditMode && editingRow === 0 && editingCol === key; else singleObjectValueModal">
                          <input type="text" class="form-control form-control-sm"
                                 [value]="getEditValue(tableData[0][key])"
                                 (blur)="saveEdit(0, key, $any($event.target).value)"
                                 (keydown.enter)="saveEdit(0, key, $any($event.target).value)" />
                        </ng-container>
                        <ng-template #singleObjectValueModal>{{ formatValue(tableData[0][key]) }}</ng-template>
                      </ng-template>
                    </td>
                  </tr>
                </tbody>
              </table>
            </ng-template>
          </ng-container>
          <div *ngIf="tableData.length === 0 && errorMessage" class="no-data">
            Enter valid JSON array to see the table
          </div>
        </div>
      </div>
      <div class="modal-footer bg-light">
        <button type="button" class="btn btn-sm btn-dark" data-bs-dismiss="modal" (click)="closeTableModal()">
          <i class="fas fa-times"></i>
          <span class="d-none d-md-inline"> Close</span>
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Info Modal -->
<div class="modal fade" id="infoModal" tabindex="-1" aria-labelledby="infoModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg">
    <div class="modal-content">
      <div class="modal-header bg-dark text-white py-3">
        <h5 class="modal-title d-flex align-items-center fs-4" id="infoModalLabel">
          <i class="fas fa-info-circle me-3"></i>
          JSON Parser Tool
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body p-4">
        <div class="welcome-section mb-4">
          <p class="lead">About This Tool</p>
          <p class="text-muted">Paste your JSON and see it instantly converted into an HTML table. Works with nested objects, arrays, and complex data structures.</p>
          <p class="text-muted">Useful when you need to quickly visualize JSON data, debug API responses, or share data in a readable format. No installation, no configuration—just paste and view.</p>
        </div>

        <div class="features-section mb-5">
          <h6 class="section-title fs-5 mb-4">What You Can Do</h6>
          <div class="row">
            <div class="col-md-6">
              <ul class="list-unstyled">
                <li class="feature-item mb-4">
                  <div class="d-flex align-items-center mb-2">
                    <i class="fas fa-magic text-primary me-3 fs-5"></i>
                    <strong>Nested Data Support</strong>
                  </div>
                  <p class="text-muted ms-4">Arrays and objects inside your JSON are automatically converted into nested tables.</p>
                </li>
                <li class="feature-item mb-4">
                  <div class="d-flex align-items-center mb-2">
                    <i class="fas fa-bolt text-warning me-3 fs-5"></i>
                    <strong>Live Preview</strong>
                  </div>
                  <p class="text-muted ms-4">Type or paste JSON and watch the table update in real-time as you edit.</p>
                </li>
                <li class="feature-item mb-4">
                  <div class="d-flex align-items-center mb-2">
                    <i class="fas fa-table text-success me-3 fs-5"></i>
                    <strong>Edit Mode</strong>
                  </div>
                  <p class="text-muted ms-4">Click "Edit" to modify table values directly. Changes sync back to the JSON editor.</p>
                </li>
              </ul>
            </div>
            <div class="col-md-6">
              <ul class="list-unstyled">
                <li class="feature-item mb-4">
                  <div class="d-flex align-items-center mb-2">
                    <i class="fas fa-file-export text-info me-3 fs-5"></i>
                    <strong>Export to Excel</strong>
                  </div>
                  <p class="text-muted ms-4">Click "Excel" to download the table as an .xls file you can open in Excel or Google Sheets.</p>
                </li>
                <li class="feature-item mb-4">
                  <div class="d-flex align-items-center mb-2">
                    <i class="fas fa-expand-arrows-alt text-danger me-3 fs-5"></i>
                    <strong>Fullscreen Mode</strong>
                  </div>
                  <p class="text-muted ms-4">Hit "Maximize" to view the table fullscreen with column filters and search.</p>
                </li>
                <li class="feature-item mb-4">
                  <div class="d-flex align-items-center mb-2">
                    <i class="fas fa-code text-secondary me-3 fs-5"></i>
                    <strong>Share with Others</strong>
                  </div>
                  <p class="text-muted ms-4">Use "Share" to generate a URL that loads your JSON. Expires after your selected period.</p>
                </li>
              </ul>
            </div>
          </div>
        </div>

        <div class="usage-section mb-5">
          <h6 class="section-title fs-5 mb-4">Quick Start</h6>
          <div class="usage-steps">
            <div class="step mb-3">
              <div class="d-flex align-items-center mb-2">
                <span class="badge bg-primary me-3">1</span>
                <strong>Paste JSON</strong>
              </div>
              <p class="text-muted ms-5">Copy JSON from your API, file, or code and paste it in the left editor. Click "Sample" to see an example.</p>
            </div>
            <div class="step mb-3">
              <div class="d-flex align-items-center mb-2">
                <span class="badge bg-primary me-3">2</span>
                <strong>View Table</strong>
              </div>
              <p class="text-muted ms-5">The table appears instantly on the right. Nested data gets its own expandable tables.</p>
            </div>
            <div class="step mb-3">
              <div class="d-flex align-items-center mb-2">
                <span class="badge bg-primary me-3">3</span>
                <strong>Export or Share</strong>
              </div>
              <p class="text-muted ms-5">Download as Excel, maximize for filtering, or share with teammates via URL.</p>
            </div>
          </div>
        </div>

        <div class="pro-tips-section mb-5">
          <h6 class="section-title fs-5 mb-4">Tips</h6>
          <div class="tips-container bg-light p-4 rounded">
            <ul class="mb-0">
              <li class="mb-2">Click "Main" or "Nested" to transpose tables (swap rows and columns)</li>
              <li class="mb-2">Use fullscreen mode to filter columns by typing in the header row</li>
              <li class="mb-2">Double-click any cell in Edit mode to change the value</li>
              <li>Invalid JSON will show an error—check for missing quotes or commas</li>
            </ul>
          </div>
        </div>

        <div class="support-section text-center mt-5">
          <p class="text-muted small">
            Questions or feedback? Use the Contact link in the footer.
          </p>
        </div>
      </div>
      <div class="modal-footer bg-light">

        <button type="button" class="btn btn-sm btn-dark" data-bs-dismiss="modal" (click)="loadSampleData()">
          <i class="fas fa-flask"></i>
          <span class="d-none d-md-inline"> Try Sample</span>
        </button>

        <button type="button" class="btn btn-sm btn-dark" data-bs-dismiss="modal">
          <i class="fas fa-times"></i>
          <span class="d-none d-md-inline"> Close</span>
        </button>

      </div>
    </div>
  </div>
</div>

<app-share-modal [jsonData]="getEditorContent()"></app-share-modal>
