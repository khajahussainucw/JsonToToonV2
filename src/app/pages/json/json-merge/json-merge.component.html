<div class="json-formatter-container">
  <!-- Page Header -->
  <div class="page-header">
    <h1 class="page-title">JSON Merge</h1>
    <p class="page-description">Merge multiple JSON objects into one</p>
  </div>
  
  <input type="file" #fileInput accept=".json,.txt" style="display: none;" (change)="onFileSelected($event)" />
  <div class="editors-wrapper">
    <!-- Left Panel (Input) -->
    <div class="editor-container">
      <div class="panel-header">
        <div class="panel-header-left">
          <h2>Input (Array of JSON objects)</h2>
        </div>
        <div class="panel-actions">
          <button class="btn" [class.active]="mergeMode === 'deep'" (click)="setMergeMode('deep')" title="Deep Merge">
            <i class="fas fa-layer-group"></i>
            <span class="d-none d-md-inline">Deep</span>
          </button>
          <button class="btn" [class.active]="mergeMode === 'shallow'" (click)="setMergeMode('shallow')" title="Shallow Merge">
            <i class="fas fa-layer-group"></i>
            <span class="d-none d-md-inline">Shallow</span>
          </button>
          <button class="btn" (click)="loadSample()" aria-label="Sample">
            <i class="fas fa-flask"></i>
            <span class="d-none d-md-inline">Sample</span>
          </button>
          <button class="btn" (click)="triggerFileUpload()" aria-label="Upload">
            <i class="fas fa-upload"></i>
            <span class="d-none d-md-inline">Upload</span>
          </button>
          <button class="btn" (click)="clearInput()">
            <i class="fas fa-trash"></i>
          </button>
        </div>
      </div>
      <div class="editor-wrapper">
        <div #inputEditor class="editor"></div>
      </div>
    </div>

    <!-- Right Panel (Output) -->
    <div class="editor-container">
      <div class="panel-header">
        <div class="panel-header-left">
          <h2>Merged Output</h2>
        </div>
        <div class="panel-actions">
          <button class="btn" (click)="downloadResult()" aria-label="Download">
            <i class="fas fa-download"></i>
            <span class="d-none d-md-inline">Download</span>
          </button>
          <button class="btn" (click)="copyToClipboard()" aria-label="Copy">
            <i class="fas fa-copy"></i>
            <span class="d-none d-md-inline">Copy</span>
          </button>
        </div>
      </div>
      <div class="editor-wrapper">
        <div #outputEditor class="editor"></div>
      </div>
    </div>
  </div>
</div>

<!-- Bootstrap Error Modal -->
<div class="modal fade" tabindex="-1" aria-labelledby="errorModalLabel" aria-hidden="true" [class.show]="errorModalVisible" [style.display]="errorModalVisible ? 'block' : 'none'">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="errorModalLabel">Error</h5>
        <button type="button" class="btn-close" aria-label="Close" (click)="closeErrorModal()"></button>
      </div>
      <div class="modal-body">
        <p>{{ errorMessage }}</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="closeErrorModal()">Close</button>
      </div>
    </div>
  </div>
</div>
<div class="modal-backdrop fade" [class.show]="errorModalVisible" *ngIf="errorModalVisible"></div>

<!-- Copy Success Toast -->
<div class="toast-container position-fixed end-0 p-3" style="top: 15%;">
  <div class="toast" [class.show]="copySuccessVisible" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="toast-header">
      <i class="fas fa-check-circle text-success me-2"></i>
      <strong class="me-auto">Success</strong>
    </div>
    <div class="toast-body">
      {{ copySuccessMessage }}
    </div>
  </div>
  <div class="toast" [class.show]="copyErrorVisible" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="toast-header">
      <i class="fas fa-exclamation-circle text-warning me-2"></i>
      <strong class="me-auto">Warning</strong>
    </div>
    <div class="toast-body">
      {{ copyErrorMessage }}
    </div>
  </div>
</div>

<!-- SEO Content Section -->
<div class="content-section">
  <div class="container-fluid px-4 py-5">
    
    <!-- Introduction Section -->
    <section class="content-block mb-5">
      <h2 class="content-heading">What is JSON Merge?</h2>
      <p class="content-text">
        JSON Merge is a free online tool that combines multiple <a href="https://www.json.org/json-en.html" target="_blank" rel="noopener noreferrer">JSON (JavaScript Object Notation)</a> objects into a single unified object. Perfect for combining configuration files, merging API responses, or consolidating data from multiple sources.
      </p>
      <p class="content-text">
        According to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON" target="_blank" rel="noopener noreferrer">MDN Web Docs</a>, merging JSON objects is a common task in web development. Our tool supports both shallow and deep merge strategies, giving you control over how nested objects are combined. Follows the <a href="https://datatracker.ietf.org/doc/html/rfc8259" target="_blank" rel="noopener noreferrer">RFC 8259 JSON specification</a> for valid output.
      </p>
      <p class="content-text">
        Everything processes in your browser â€“ your JSON data never leaves your computer. Merge multiple objects instantly with a single click.
      </p>
    </section>

    <!-- Key Features Section -->
    <section class="content-block mb-5">
      <h2 class="content-heading">What Makes This Tool Different</h2>
      <div class="row g-4">
        <div class="col-md-6 col-lg-4">
          <div class="feature-card">
            <h3 class="feature-title">Deep & Shallow Merge</h3>
            <p class="feature-description">Choose between deep merge (recursively merges nested objects) or shallow merge (overwrites nested objects). Perfect for different use cases.</p>
          </div>
        </div>
        <div class="col-md-6 col-lg-4">
          <div class="feature-card">
            <h3 class="feature-title">Multiple Objects</h3>
            <p class="feature-description">Merge an array of JSON objects into one. Handles any number of objects, combining them in order with your chosen merge strategy.</p>
          </div>
        </div>
        <div class="col-md-6 col-lg-4">
          <div class="feature-card">
            <h3 class="feature-title">Property Override</h3>
            <p class="feature-description">Later objects override earlier ones for conflicting properties. Perfect for applying defaults and then overriding with specific values.</p>
          </div>
        </div>
        <div class="col-md-6 col-lg-4">
          <div class="feature-card">
            <h3 class="feature-title">File Upload Support</h3>
            <p class="feature-description">Upload .json or .txt files directly. Perfect for merging large configuration files or API response arrays without copy-pasting.</p>
          </div>
        </div>
        <div class="col-md-6 col-lg-4">
          <div class="feature-card">
            <h3 class="feature-title">Copy & Download</h3>
            <p class="feature-description">Copy merged JSON to clipboard with one click, or download it as a file. Ready to use in your application immediately.</p>
          </div>
        </div>
        <div class="col-md-6 col-lg-4">
          <div class="feature-card">
            <h3 class="feature-title">Syntax Highlighting</h3>
            <p class="feature-description">Provides beautiful syntax highlighting for both input and output. Makes it easy to verify the merged result.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- How to Use Section -->
    <section class="content-block mb-5">
      <h2 class="content-heading">How It Works</h2>
      <div class="steps-container">
        <div class="step-item">
          <div class="step-number">1</div>
          <div class="step-content">
            <h3 class="step-title">Paste or Upload JSON Array</h3>
            <p class="step-description">Paste an array of JSON objects into the left editor, or click "Upload" to load a file. The format should be like <code>[{"key":"value1"},{"key":"value2"}]</code>. Click "Sample" to see an example.</p>
          </div>
        </div>
        <div class="step-item">
          <div class="step-number">2</div>
          <div class="step-content">
            <h3 class="step-title">Choose Merge Mode</h3>
            <p class="step-description">Select "Deep" for recursive merging of nested objects, or "Shallow" to overwrite nested objects entirely. The merged result appears automatically in the right panel.</p>
          </div>
        </div>
        <div class="step-item">
          <div class="step-number">3</div>
          <div class="step-content">
            <h3 class="step-title">Copy or Download</h3>
            <p class="step-description">Review the merged JSON in the output panel. Click "Copy" to copy it to your clipboard, or "Download" to save it as a file.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Use Cases Section -->
    <section class="content-block mb-5">
      <h2 class="content-heading">When You'd Actually Use This</h2>
      <div class="row g-4">
        <div class="col-md-6">
          <div class="use-case-card">
            <h3 class="use-case-title"><i class="fas fa-cog me-2"></i>Config File Merging</h3>
            <p class="use-case-text">Merge default configuration with environment-specific overrides. Deep merge preserves nested settings while allowing selective overrides.</p>
          </div>
        </div>
        <div class="col-md-6">
          <div class="use-case-card">
            <h3 class="use-case-title"><i class="fas fa-code-branch me-2"></i>API Response Combination</h3>
            <p class="use-case-text">Combine multiple API responses into a single object. Useful when you need to aggregate data from different endpoints.</p>
          </div>
        </div>
        <div class="col-md-6">
          <div class="use-case-card">
            <h3 class="use-case-title"><i class="fas fa-database me-2"></i>Data Consolidation</h3>
            <p class="use-case-text">Merge JSON exports from different sources. Combine user data, settings, or preferences into unified objects.</p>
          </div>
        </div>
        <div class="col-md-6">
          <div class="use-case-card">
            <h3 class="use-case-title"><i class="fas fa-layer-group me-2"></i>Object Composition</h3>
            <p class="use-case-text">Build complex objects by merging simpler ones. Perfect for creating default objects and then adding specific properties.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ Section -->
    <section class="content-block mb-5">
      <h2 class="content-heading">Common Questions</h2>
      <div class="faq-container">
        <div class="faq-item">
          <h3 class="faq-question">Is my JSON data stored?</h3>
          <p class="faq-answer">No. Merging happens entirely in your browser using JavaScript. Your data never leaves your computer.</p>
        </div>
        <div class="faq-item">
          <h3 class="faq-question">What's the difference between deep and shallow merge?</h3>
          <p class="faq-answer">Deep merge recursively combines nested objects, merging their properties. Shallow merge overwrites entire nested objects. For example, with <code>{"a":{"b":1}}</code> and <code>{"a":{"c":2}}</code>, deep merge gives <code>{"a":{"b":1,"c":2}}</code>, while shallow gives <code>{"a":{"c":2}}</code>.</p>
        </div>
        <div class="faq-item">
          <h3 class="faq-question">What happens with conflicting properties?</h3>
          <p class="faq-answer">Properties from later objects override properties from earlier objects. The last object in the array wins for conflicting keys.</p>
        </div>
        <div class="faq-item">
          <h3 class="faq-question">Can I merge arrays?</h3>
          <p class="faq-answer">The tool merges objects, not arrays. If you have an array of objects, it merges those objects. Array properties within objects are overwritten, not merged.</p>
        </div>
        <div class="faq-item">
          <h3 class="faq-question">What if objects have different structures?</h3>
          <p class="faq-answer">The merge combines all properties from all objects. Properties that exist in one object but not others are preserved. The result contains all unique properties.</p>
        </div>
        <div class="faq-item">
          <h3 class="faq-question">Does it work with invalid JSON?</h3>
          <p class="faq-answer">No. All input must be valid JSON. If the input is invalid, you'll see an error. Use our <a routerLink="/json-validator">JSON Validator</a> or <a routerLink="/json-fixer">JSON Fixer</a> first.</p>
        </div>
      </div>
    </section>

    <!-- Related Tools Section -->
    <section class="content-block">
      <h2 class="content-heading">Other JSON Tools You Might Need</h2>
      <p class="content-text mb-4">Merging is just one JSON task. Here are other tools that work well together:</p>
      <div class="related-tools-grid">
        <a routerLink="/" class="tool-link">
          <i class="fas fa-table"></i>
          <span>JSON Parser</span>
        </a>
        <a routerLink="/json-formatter" class="tool-link">
          <i class="fas fa-indent"></i>
          <span>JSON Formatter</span>
        </a>
        <a routerLink="/json-validator" class="tool-link">
          <i class="fas fa-check-circle"></i>
          <span>JSON Validator</span>
        </a>
        <a routerLink="/json-diff" class="tool-link">
          <i class="fas fa-code-branch"></i>
          <span>JSON Diff</span>
        </a>
        <a routerLink="/json-fixer" class="tool-link">
          <i class="fas fa-wrench"></i>
          <span>JSON Fixer</span>
        </a>
        <a routerLink="/json-to-csv" class="tool-link">
          <i class="fas fa-file-csv"></i>
          <span>JSON to CSV</span>
        </a>
        <a routerLink="/json-to-yaml" class="tool-link">
          <i class="fas fa-file-code"></i>
          <span>JSON to YAML</span>
        </a>
        <a routerLink="/json-schema-generator" class="tool-link">
          <i class="fas fa-project-diagram"></i>
          <span>JSON Schema Generator</span>
        </a>
      </div>
      <p class="content-text mt-4">
        Need to learn more about JSON? Check out the official <a href="https://www.json.org/" target="_blank" rel="noopener noreferrer">JSON.org</a> website or the comprehensive guide on <a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/JSON" target="_blank" rel="noopener noreferrer">MDN</a>.
      </p>
    </section>

  </div>
</div>

